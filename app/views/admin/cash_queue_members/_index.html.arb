context.instance_eval do
  selectable_column
  queue_members = cash_queue.cash_queue_members.position_asc
  column(:qid) do |resource|
    index = 0
    queue_members.each_with_index do |v, k|
      break index = k if v.eql?(resource)
    end
    "No.#{index + 1}"
  end
  column(:nickname, sortable: false)
  column(:created_at)
  column(:updated_at)
  actions defaults: false do |member|
    item '删除', admin_cash_queue_cash_queue_member_path(member.cash_queue, member),
         method: :delete,
         data: {confirm: '确定取消排队吗？'},
         class: 'member_link'
    item '修改', edit_info_admin_cash_queue_cash_queue_member_path(member.cash_queue, member), method: :get, class: 'member_link', remote: true
    item '查看排队情况', member_queue_status_admin_cash_queue_cash_queue_member_path(member.cash_queue, member),
         method: :post,
         remote: true
  end
end


